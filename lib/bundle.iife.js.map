{"version":3,"file":"bundle.iife.js","sources":["../src/list.ts","../src/utils.ts","../src/hashTable.ts","../src/main.ts"],"sourcesContent":["export class List<T> {\r\n  private items: Array<T>;\r\n\r\n  private checkIndex(index): boolean {\r\n    return !(index < 0 || isNaN(index) || index >= this.items.length);\r\n  }\r\n  constructor() {\r\n    this.items = new Array<T>();\r\n  }\r\n\r\n  length(): number {\r\n    return this.items.length;\r\n  }\r\n\r\n  add(value: T): void {\r\n    this.items.push(value);\r\n  }\r\n  addList(valueList: List<T>) {\r\n    for (var i = 0; i < valueList.length(); i++) {\r\n      var value = valueList.get(i);\r\n      this.items.push(value);\r\n    }\r\n  }\r\n  pop(): T {\r\n    return this.items.pop();\r\n  }\r\n\r\n  shift() {\r\n    this.items.shift();\r\n  }\r\n\r\n  remove(index: number): void {\r\n    if (this.checkIndex(index)) {\r\n      this.items.splice(index, 1);\r\n\r\n    }\r\n  }\r\n  /**\r\n   * 從指定索引處開始刪除指定個數的元素\r\n   * @param from \r\n   * @param count \r\n   */\r\n  removeMany(from: number, count: number) {\r\n\r\n    if (this.checkIndex(from)) {\r\n      this.items.splice(from, count);\r\n    }\r\n  }\r\n\r\n  clear(): void {\r\n    this.items = [];\r\n  }\r\n\r\n  contains(value: T): boolean {\r\n    for (var i in this.items) {\r\n      return value == this.items[i];\r\n    }\r\n    return false;\r\n  }\r\n\r\n  indexOf(value: T): number {\r\n    return this.items.indexOf(value);\r\n  }\r\n\r\n  insert(index: number, value: T) {\r\n    //this.checkIndex(index) && this.items.splice(index , 0, value);\r\n    this.items.splice(index, 0, value);\r\n  }\r\n\r\n  get(index: number): T {\r\n    return this.items[index];\r\n  }\r\n  set(index, value: T) {\r\n    this.items[index] = value;\r\n  }\r\n  all(): Array<T> {\r\n    return this.items;\r\n  }\r\n  foreach(callback: (i: number, item: T) => any) {\r\n    var len = this.items.length;\r\n    for (var i = 0; i < len; i++) {\r\n      if (callback(i, this.items[i]) === false) break;\r\n    }\r\n  }\r\n  reverseForeach(callback) {\r\n    var len = this.items.length;\r\n    for (var i = len - 1; i >= 0; i--) {\r\n      if (callback(i, this.items[i]) === false) break;\r\n    }\r\n  }\r\n  sort(callback: Function) {\r\n    this.items.sort((a: T, b: T) => { return callback(a, b); });\r\n  }\r\n}","import { HashTable, PenLine, Point, PenShape } from './hashTable'\r\nimport { List } from './list';\r\nfunction getRandomColor() {\r\n  var randColor = (Math.random() * 0xFFFFFF << 0).toString(16);\r\n  while (randColor.length < 6) {\r\n      randColor = \"0\" + randColor;\r\n  }\r\n  return randColor\r\n}\r\n\r\nexport function getUniqueColorKey(elements: HashTable<PenShape>) {\r\n  var key = ''\r\n  while (true) {\r\n      key = getRandomColor();\r\n      if (key && !(elements.has(key))) {\r\n          break;\r\n      }\r\n  }\r\n  return `#${key}`;\r\n}\r\n\r\nexport function hexToRgbA(hex: string): [number, number, number]{\r\n  var c;\r\n  if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){\r\n      c= hex.substring(1).split('');\r\n      if(c.length== 3){\r\n          c= [c.x, c.x, c.y, c.y, c[2], c[2]];\r\n      }\r\n      c= '0x'+c.join('');\r\n      return [(c>>16)&255, (c>>8)&255, c&255];\r\n  }\r\n  throw new Error('Bad Hex');\r\n}\r\n\r\nexport function abgleCacul(pointA: Point, pointB: Point, pointC: Point): number {\r\n  const lengthAB = Math.sqrt( Math.pow(pointA.x - pointB.x, 2) + \r\n  Math.pow(pointA.y - pointB.y, 2))\r\n  const lengthAC = Math.sqrt( Math.pow(pointA.x - pointC.x, 2) + \r\n    Math.pow(pointA.y - pointC.y, 2))\r\n  const lengthBC = Math.sqrt( Math.pow(pointB.x - pointC.x, 2) + \r\n    Math.pow(pointB.y - pointC.y, 2));\r\n  const cosA = (Math.pow(lengthAB, 2) + Math.pow(lengthAC, 2) - Math.pow(lengthBC, 2)) / \r\n    (2 * lengthAB * lengthAC);\r\n  const angleA = Math.round( Math.acos(cosA) * 180 / Math.PI );\r\n  return angleA\r\n}\r\n\r\nexport function isInPolygon(checkPoint: Point, polygonPoints: List<Point>): boolean {\r\n  var counter = 0;\r\n  var i;\r\n  var xinters;\r\n  var p1, p2;\r\n  var pointCount = polygonPoints.length();\r\n  p1 = polygonPoints.get(0);\r\n\r\n  for (i = 1; i <= pointCount; i++) {\r\n      p2 = polygonPoints.get(i % pointCount);\r\n      if (\r\n          checkPoint.x > Math.min(p1.x, p2.x) &&\r\n          checkPoint.x <= Math.max(p1.x, p2.x)\r\n      ) {\r\n          if (checkPoint.y <= Math.max(p1.y, p2.y)) {\r\n              if (p1.x != p2.x) {\r\n                  xinters =\r\n                      (checkPoint.x - p1.x) *\r\n                          (p2.y - p1.y) /\r\n                          (p2.x - p1.x) +\r\n                      p1.y;\r\n                  if (p1.y == p2.y || checkPoint.y <= xinters) {\r\n                      counter++;\r\n                  }\r\n              }\r\n          }\r\n      }\r\n      p1 = p2;\r\n  }\r\n  if (counter % 2 == 0) {\r\n      return false;\r\n  } else {\r\n      return true;\r\n  }\r\n}","import { List } from './list'\r\nimport { hexToRgbA, getUniqueColorKey } from './utils'\r\nexport class Point {\r\n  x: number;\r\n  y: number;\r\n  constructor(x: number, y: number) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n  draw (ctx: CanvasRenderingContext2D) {\r\n    ctx.strokeStyle = '#fff';\r\n    ctx.lineWidth = 1\r\n    ctx.beginPath()\r\n    ctx.arc(this.x + 0.5, this.y + 0.5, 2, 0, 360)\r\n    ctx.stroke()\r\n    ctx.closePath()\r\n  }\r\n}\r\n\r\nexport class PenShape {\r\n  colorKey: string;\r\n  lineColor: string;\r\n  lineWidth: number;\r\n  points: List<Point>;\r\n  rgb: [number, number, number];\r\n  constructor(colorKey: string) {\r\n    this.rgb = hexToRgbA(colorKey)\r\n    this.colorKey = colorKey\r\n    this.lineColor = colorKey\r\n    this.lineWidth = 1\r\n    this.points = new List<Point>()\r\n  }\r\n  copy (colorKey: string) {\r\n    const copyed = new PenShape(colorKey)\r\n    copyed.points.addList(this.points)\r\n    return copyed\r\n  }\r\n  draw (ctx: CanvasRenderingContext2D, isHintDraw: boolean, closePath: boolean) {\r\n    const len = this.points.length()\r\n    if (len >= 2) {\r\n      ctx.fillStyle = 'green';\r\n      if (isHintDraw) {\r\n        // ctx.strokeStyle = this.colorKey;\r\n        ctx.strokeStyle = '#f5222d'\r\n      } else {\r\n        ctx.strokeStyle = '#1890ff';\r\n      }\r\n      ctx.lineWidth = this.lineWidth;\r\n      ctx.beginPath()\r\n      for (let i = 0; i < len-1; i++) {\r\n        ctx.moveTo(this.points.get(i).x + 0.5, this.points.get(i).y + 0.5)\r\n        ctx.lineTo(this.points.get(i + 1).x  + 0.5, this.points.get(i + 1).y  + 0.5)\r\n      }\r\n      if (closePath) {\r\n        ctx.moveTo(this.points.get(len - 1).x + 0.5, this.points.get(len -1).y + 0.5)\r\n        ctx.lineTo(this.points.get(0).x  + 0.5, this.points.get(0).y  + 0.5)\r\n      }\r\n      ctx.stroke()\r\n      if (isHintDraw) {\r\n        this.points.foreach((index, point) => {\r\n          point.draw(ctx)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class PenLine {\r\n  colorKey: string;\r\n  lineColor: string;\r\n  lineWidth: number;\r\n  points: List<Point>;\r\n  constructor(colorKey: string) {\r\n    this.colorKey = colorKey\r\n    this.lineColor = 'rgba(0, 0, 0, 1)'\r\n    this.lineWidth = 1\r\n    this.points = new List<Point>()\r\n  }\r\n  draw(ctx: CanvasRenderingContext2D, eraserRadius: number, isDrawHit: boolean) {\r\n    var count = this.points.length();\r\n    var p: Point = this.points.get(0);\r\n    if (isDrawHit) {\r\n      ctx.strokeStyle = this.colorKey;\r\n    }\r\n    else {\r\n      ctx.strokeStyle = this.lineColor;\r\n    }\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineJoin = 'round';//转折的时候不出现尖角\r\n    if (ctx.canvas.id == \"hitCanvas\")\r\n      ctx.lineWidth = this.lineWidth + eraserRadius;//扩大hit上线条的范围，橡皮半径\r\n    else\r\n    ctx.lineWidth = this.lineWidth;\r\n    ctx.beginPath();\r\n    if (count >= 2) {\r\n      ctx.moveTo(p.x, p.y);\r\n      for (var i = 1; i < count - 2; i++) {\r\n        // p = this.points.get(i);\r\n        // ctx.lineTo(p.x, p.y);\r\n        if (this.points.get(i).x == this.points.get(i + 1).x && this.points.get(i).y == this.points.get(i + 1).y)\r\n          continue;\r\n        var c = (this.points.get(i).x + this.points.get(i + 1).x) / 2;\r\n        var d = (this.points.get(i).y + this.points.get(i + 1).y) / 2;\r\n        ctx.quadraticCurveTo(this.points.get(i).x, this.points.get(i).y, c, d); //二次贝塞曲线函数   \r\n      }\r\n      // For the last 2 points\r\n      if (count >= 3) {\r\n        ctx.quadraticCurveTo(\r\n          this.points.get(i).x,\r\n          this.points.get(i).y,\r\n          this.points.get(i + 1).x,\r\n          this.points.get(i + 1).y\r\n        );\r\n      } else if (count >= 2) {\r\n        ctx.lineTo(this.points.get(1).x, this.points.get(1).y);\r\n      }\r\n      ctx.stroke();\r\n    } else {\r\n      if (isDrawHit) {\r\n        ctx.fillStyle = this.colorKey;\r\n      }\r\n      else {\r\n        ctx.fillStyle = this.lineColor;\r\n      }\r\n      if (ctx.canvas.id == \"hitCanvas\")\r\n        var radius = this.lineWidth + eraserRadius;//扩大hit上线条的范围，橡皮半径\r\n      else\r\n        var radius = this.lineWidth;\r\n      ctx.arc(this.points.get(0).x, this.points.get(0).y, radius, 0, 2 * Math.PI);\r\n      ctx.fill();\r\n    }\r\n  }\r\n}\r\n\r\nclass HashValue<T>{\r\n  key: string;\r\n  value: T;\r\n  index: number;\r\n}\r\n\r\nexport class HashTable<T> {\r\n  private items: { [key: string]: HashValue<T> };\r\n  private itemList: Array<T>;\r\n  constructor() {\r\n    this.items = {};\r\n    this.itemList = [];\r\n  }\r\n\r\n  set(key: string, value: T): void {\r\n    var vl = new HashValue<T>();\r\n    vl.key = key;\r\n    vl.value = value;\r\n    var index = this.itemList.length;\r\n    if (this.has(key)) {\r\n      index = this.items[key].index;\r\n    }\r\n    vl.index = index;\r\n    this.itemList[index] = value;\r\n    this.items[key] = vl;\r\n  }\r\n\r\n  del(key: string): void {\r\n    if (this.has(key)) {\r\n      var index = this.items[key].index;\r\n      if (index > -1) {\r\n        this.itemList.splice(index, 1);\r\n      }\r\n      delete this.items[key];\r\n      this.resetIndex();\r\n    }\r\n  }\r\n\r\n  resetIndex(): void {\r\n\r\n    this.foreach((k, v: T) => {\r\n      var index = this.itemList.indexOf(v);\r\n      this.items[k].index = index;\r\n    });\r\n  }\r\n\r\n  has(key: string): boolean {\r\n    return key in this.items;\r\n  }\r\n\r\n  get(key: string): T {\r\n    if (this.has(key)) {\r\n      return this.items[key].value;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  count(): number {\r\n    return this.itemList.length;\r\n  }\r\n\r\n  all(): Array<T> {\r\n    return this.itemList;\r\n  }\r\n\r\n  first() {\r\n    return this.itemList[0];\r\n  }\r\n\r\n  last() {\r\n    return this.itemList[this.itemList.length - 1];\r\n  }\r\n\r\n  getByIndex(index: number): T {\r\n    return this.itemList[index];\r\n  }\r\n\r\n  //遍历 扩展\r\n  foreach(callback: (key: string, value: T) => void) {\r\n    for (var key in this.items) {\r\n      callback(key, this.items[key].value);\r\n    }\r\n  }\r\n\r\n  //获取index\r\n  indexOf(key) {\r\n    if (this.has(key)) {\r\n      return this.items[key].index;\r\n    }\r\n  }\r\n\r\n  //插入\r\n  insertAt(index: number, value: T, key: string) {\r\n    this.itemList.splice(index, 0, value);\r\n    var hashV = new HashValue<T>();\r\n    hashV.index = index;\r\n    hashV.key = key;\r\n    hashV.value = value;\r\n    this.items[key] = hashV;\r\n    this.resetIndex();\r\n  }\r\n\r\n  sort(callback: Function) {\r\n    this.itemList.sort((a: T, b: T) => {\r\n      return callback(a, b);\r\n    });\r\n  }\r\n}","import { HashTable, PenShape, Point, PenLine } from './hashTable'\r\nimport { List } from './list'\r\nimport { getUniqueColorKey, isInPolygon } from './utils'\r\nconst $select = document.getElementById('select')\r\nconst $copy = document.getElementById('copy')\r\nconst $drawRect = document.getElementById('draw-rect')\r\nconst $drawShape = document.getElementById('draw-shape')\r\nconst $eraser = document.getElementById('eraser')\r\nconst $undo = document.getElementById('undo')\r\nconst $del = document.getElementById('delte-btn')\r\nconst $cleanup = document.getElementById('cleanup')\r\nconst $connfirmBtn = document.getElementById('confirm-btn')\r\nconst $cancelBtn = document.getElementById('cancel-btn')\r\nconst hintCanvas = document.getElementById('hint-canvas') as HTMLCanvasElement\r\nconst mainCanvas = document.getElementById('main-canvas') as HTMLCanvasElement\r\nconst mainContext = mainCanvas.getContext('2d')\r\nconst context = hintCanvas.getContext('2d')\r\nlet hashTable = new HashTable<PenShape>()\r\nlet currentPenline: PenShape = null\r\nlet copyPenLine: PenShape = null\r\nlet eraserRadius = 10\r\nlet isErasePoint = true\r\nlet editMode: 'draw' | 'eraser' | 'select' | 'edit' | 'copy' = 'draw'\r\nlet drawMode: 'rect' | 'shape' = 'rect'\r\nlet shapeState: 'enable' | 'disable' = 'disable'\r\nfunction removeBtnActive () {\r\n  const els = document.getElementsByClassName('btn-active')\r\n  for (let i = 0; i < els.length; i++) {\r\n    els[i].classList.remove('btn-active')\r\n  }\r\n}\r\n$select.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'select'\r\n  removeBtnActive()\r\n  $select.classList.add('btn-active')\r\n})\r\n\r\n$copy.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'copy'\r\n  removeBtnActive()\r\n  $copy.classList.add('btn-active')\r\n})\r\n\r\n$drawRect.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'draw'\r\n  drawMode = 'rect'\r\n  shapeState = 'enable'\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$drawShape.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'draw'\r\n  drawMode = 'shape'\r\n  shapeState = 'enable'\r\n  removeBtnActive()\r\n  $drawShape.classList.add('btn-active')\r\n})\r\n\r\n/* $eraser.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  console.log('eraser')\r\n  editMode = 'eraser'\r\n})\r\n */\r\n$cleanup.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  hashTable = new HashTable<PenShape>()\r\n  mainContext.clearRect(0, 0, mainCanvas.width, mainCanvas.height);\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$undo.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  const last = hashTable.last()\r\n  if (last) {\r\n    hashTable.del(last.colorKey)\r\n    mainDraw()\r\n  }\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$del.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  if (currentPenline) {\r\n    hashTable.del(currentPenline.colorKey)\r\n    currentPenline = null\r\n    hintClear()\r\n    mainDraw()\r\n    editMode = 'draw'\r\n  }\r\n})\r\n\r\n$connfirmBtn.addEventListener('click', (e) => {\r\n  if (editMode === 'edit') {\r\n    hashTable.set(currentPenline.colorKey, currentPenline)\r\n    currentPenline = null\r\n    hintClear()\r\n    mainDraw()\r\n    editMode = 'draw'\r\n  }\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$cancelBtn.addEventListener('click', (e) => {\r\n  if (editMode === 'edit') {\r\n    if (copyPenLine) {\r\n      const restShape = new PenShape(currentPenline.colorKey)\r\n      restShape.points.addList(copyPenLine.points)\r\n      hashTable.set(currentPenline.colorKey, restShape)\r\n      copyPenLine = null\r\n    }\r\n    currentPenline = null\r\n    hintClear()\r\n    mainDraw()\r\n    editMode = 'draw'\r\n  }\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\nconst {\r\n  width: rectWidth,\r\n  height: rectHeight,\r\n  left: rectLeft,\r\n  top: reactTop\r\n} = hintCanvas.getBoundingClientRect()\r\nconst { width: canvasWidth, height: canvasHeight } = hintCanvas\r\nconst scaleX = (canvasWidth / rectWidth)\r\nconst scaleY = (canvasHeight / rectHeight)\r\nconst offsetLeft = rectLeft\r\nconst offsetTop = reactTop\r\n\r\nfunction hintClear () {\r\n  context.clearRect(0, 0, hintCanvas.width, hintCanvas.height)\r\n}\r\n\r\nfunction mainClear () {\r\n  mainContext.clearRect(0, 0, mainCanvas.width, mainCanvas.height)\r\n}\r\n\r\nfunction hintDraw () {\r\n  hintClear()\r\n  currentPenline.draw(context, true, editMode !== 'draw' || drawMode === 'rect')\r\n}\r\n\r\nfunction mainDraw() {\r\n  mainContext.clearRect(0, 0, mainContext.canvas.width, mainContext.canvas.height); // 清除画布内容\r\n  hashTable.foreach((key, val) => {\r\n    if (!currentPenline || key !== currentPenline.colorKey) {\r\n      val.draw(mainContext, false, true)\r\n    }\r\n  })\r\n}\r\n\r\nlet keepPoint: Point\r\nlet keepPointIndex: number\r\nhintCanvas.addEventListener('mousedown', function (e) {\r\n  e.preventDefault()\r\n  const point: Point = new Point(\r\n    Math.floor((e.pageX - offsetLeft) * scaleX),\r\n    Math.floor((e.pageY - offsetTop) * scaleY),\r\n  )\r\n  if (editMode === 'edit') {\r\n    currentPenline.points.foreach((index, p) => {\r\n      if (Math.abs(p.x - point.x) < 3 && Math.abs(p.y - point.y) < 3) {\r\n        keepPointIndex = index\r\n      }\r\n    })\r\n  }\r\n  if (editMode === 'draw') {\r\n    if (!currentPenline) {\r\n      const colorKey = getUniqueColorKey(hashTable)\r\n      currentPenline = new PenShape(colorKey)\r\n    }\r\n    if (drawMode === 'shape') {\r\n      const len = currentPenline.points.length()\r\n      if (len === 0) {\r\n        currentPenline.points.add(point)\r\n      } else {\r\n        const p0 = currentPenline.points.get(0)\r\n        if (Math.abs(p0.x - point.x) < 3 && Math.abs(p0.y - point.y) < 3) {\r\n          currentPenline.points.remove(len - 1)\r\n          shapeState = 'disable'\r\n          editMode = 'edit'\r\n          removeBtnActive()\r\n        }\r\n      }\r\n      if (shapeState === 'enable') {\r\n        currentPenline.points.add(point)\r\n      }\r\n    }\r\n    if (drawMode === 'rect') {\r\n      currentPenline.points.add(point)\r\n      currentPenline.points.add(point)\r\n      currentPenline.points.add(point)\r\n      currentPenline.points.add(point)\r\n    }\r\n  }\r\n  if (editMode === 'select' || editMode === 'copy') {\r\n    hashTable.foreach(key => {\r\n      if (isInPolygon(point, hashTable.get(key).points)) {\r\n        currentPenline = hashTable.get(key)\r\n      }\r\n    })\r\n    if (currentPenline) {\r\n      copyPenLine = currentPenline.copy(getUniqueColorKey(hashTable))\r\n      if (editMode === 'copy') {\r\n        currentPenline = copyPenLine\r\n        copyPenLine = null\r\n      }\r\n      keepPoint = point\r\n      mainDraw()\r\n    }\r\n  }\r\n  if (currentPenline) {\r\n    hintDraw()\r\n  }\r\n})\r\n\r\nconst onMouseMoveHandler = function (e: MouseEvent) {\r\n  e.preventDefault()\r\n  if (currentPenline) {\r\n    const x = Math.floor((e.pageX - offsetLeft) * scaleX)\r\n    const y = Math.floor((e.pageY - offsetTop) * scaleY)\r\n    if (editMode === 'draw') {\r\n      if (drawMode === 'rect') {\r\n        const point0 = currentPenline.points.get(0)\r\n        const point1: Point = new Point(point0.x, y)\r\n        const point2: Point = new Point(x, y)\r\n        const point3: Point = new Point(x, point0.y)\r\n        currentPenline.points.set(1, point1)\r\n        currentPenline.points.set(2, point2)\r\n        currentPenline.points.set(3, point3)\r\n      }\r\n      if (drawMode === 'shape' && shapeState === 'enable') {\r\n        currentPenline.points.set(currentPenline.points.length() - 1, new Point(x, y))\r\n      }\r\n      hintDraw()\r\n    }\r\n    if (editMode === 'select' || editMode === 'copy') {\r\n      currentPenline.points.foreach((index, point) => {\r\n        currentPenline.points.set(index, new Point(point.x - (keepPoint.x - x), point.y - (keepPoint.y - y)))\r\n      })\r\n      keepPoint = new Point(x, y)\r\n      hintDraw()\r\n    }\r\n    if (editMode === 'edit') {\r\n      if(keepPointIndex !== null) {\r\n        currentPenline.points.set(keepPointIndex, new Point(x, y))\r\n        hintDraw()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nhintCanvas.addEventListener('mousemove', onMouseMoveHandler);\r\nhintCanvas.addEventListener('mouseup', function (e) {\r\n  e.preventDefault()\r\n  if (keepPointIndex !== null) {\r\n    keepPointIndex = null\r\n  }\r\n  if (drawMode !== 'shape' || editMode === 'select' || editMode === 'copy') {\r\n    editMode = 'edit'\r\n    removeBtnActive()\r\n  }\r\n});\r\n\r\nhintCanvas.addEventListener('mouseleava', function (e) {\r\n});"],"names":[],"mappings":";;;;;EAAA;MAME;UACE,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAK,CAAC;OAC7B;MALO,yBAAU,GAAlB,UAAmB,KAAK;UACtB,OAAO,EAAE,KAAK,GAAG,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;OACnE;MAKD,qBAAM,GAAN;UACE,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;OAC1B;MAED,kBAAG,GAAH,UAAI,KAAQ;UACV,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACxB;MACD,sBAAO,GAAP,UAAQ,SAAkB;UACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,EAAE;cAC3C,IAAI,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;cAC7B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;WACxB;OACF;MACD,kBAAG,GAAH;UACE,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;OACzB;MAED,oBAAK,GAAL;UACE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;OACpB;MAED,qBAAM,GAAN,UAAO,KAAa;UAClB,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE;cAC1B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;WAE7B;OACF;;;;;;MAMD,yBAAU,GAAV,UAAW,IAAY,EAAE,KAAa;UAEpC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;cACzB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;WAChC;OACF;MAED,oBAAK,GAAL;UACE,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;OACjB;MAED,uBAAQ,GAAR,UAAS,KAAQ;UACf,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,EAAE;cACxB,OAAO,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;WAC/B;UACD,OAAO,KAAK,CAAC;OACd;MAED,sBAAO,GAAP,UAAQ,KAAQ;UACd,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;OAClC;MAED,qBAAM,GAAN,UAAO,KAAa,EAAE,KAAQ;;UAE5B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;OACpC;MAED,kBAAG,GAAH,UAAI,KAAa;UACf,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;OAC1B;MACD,kBAAG,GAAH,UAAI,KAAK,EAAE,KAAQ;UACjB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;OAC3B;MACD,kBAAG,GAAH;UACE,OAAO,IAAI,CAAC,KAAK,CAAC;OACnB;MACD,sBAAO,GAAP,UAAQ,QAAqC;UAC3C,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;UAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;cAC5B,IAAI,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK;kBAAE,MAAM;WACjD;OACF;MACD,6BAAc,GAAd,UAAe,QAAQ;UACrB,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;UAC5B,KAAK,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;cACjC,IAAI,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK;kBAAE,MAAM;WACjD;OACF;MACD,mBAAI,GAAJ,UAAK,QAAkB;UACrB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAC,CAAI,EAAE,CAAI,IAAO,OAAO,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;OAC7D;MACH,WAAC;EAAD,CAAC;;EC3FD,SAAS,cAAc;MACrB,IAAI,SAAS,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,QAAQ,IAAI,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC;MAC7D,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;UACzB,SAAS,GAAG,GAAG,GAAG,SAAS,CAAC;OAC/B;MACD,OAAO,SAAS,CAAA;EAClB,CAAC;WAEe,iBAAiB,CAAC,QAA6B;MAC7D,IAAI,GAAG,GAAG,EAAE,CAAA;MACZ,OAAO,IAAI,EAAE;UACT,GAAG,GAAG,cAAc,EAAE,CAAC;UACvB,IAAI,GAAG,IAAI,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;cAC7B,MAAM;WACT;OACJ;MACD,OAAO,MAAI,GAAK,CAAC;EACnB,CAAC;WAEe,SAAS,CAAC,GAAW;MACnC,IAAI,CAAC,CAAC;MACN,IAAG,0BAA0B,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC;UACpC,CAAC,GAAE,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;UAC9B,IAAG,CAAC,CAAC,MAAM,IAAG,CAAC,EAAC;cACZ,CAAC,GAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;WACvC;UACD,CAAC,GAAE,IAAI,GAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;UACnB,OAAO,CAAC,CAAC,CAAC,IAAE,EAAE,IAAE,GAAG,EAAE,CAAC,CAAC,IAAE,CAAC,IAAE,GAAG,EAAE,CAAC,GAAC,GAAG,CAAC,CAAC;OAC3C;MACD,MAAM,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC;EAC7B,CAAC;WAee,WAAW,CAAC,UAAiB,EAAE,aAA0B;MACvE,IAAI,OAAO,GAAG,CAAC,CAAC;MAChB,IAAI,CAAC,CAAC;MACN,IAAI,OAAO,CAAC;MACZ,IAAI,EAAE,EAAE,EAAE,CAAC;MACX,IAAI,UAAU,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC;MACxC,EAAE,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAE1B,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,UAAU,EAAE,CAAC,EAAE,EAAE;UAC9B,EAAE,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC;UACvC,IACI,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;cACnC,UAAU,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EACtC;cACE,IAAI,UAAU,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE;kBACtC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;sBACd,OAAO;0BACH,CAAC,UAAU,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;+BACf,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;+BACZ,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;8BACjB,EAAE,CAAC,CAAC,CAAC;sBACT,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,IAAI,OAAO,EAAE;0BACzC,OAAO,EAAE,CAAC;uBACb;mBACJ;eACJ;WACJ;UACD,EAAE,GAAG,EAAE,CAAC;OACX;MACD,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,EAAE;UAClB,OAAO,KAAK,CAAC;OAChB;WAAM;UACH,OAAO,IAAI,CAAC;OACf;EACH;;EC/EA;MAGE,eAAY,CAAS,EAAE,CAAS;UAC9B,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;UACV,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;OACX;MACD,oBAAI,GAAJ,UAAM,GAA6B;UACjC,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC;UACzB,GAAG,CAAC,SAAS,GAAG,CAAC,CAAA;UACjB,GAAG,CAAC,SAAS,EAAE,CAAA;UACf,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAA;UAC9C,GAAG,CAAC,MAAM,EAAE,CAAA;UACZ,GAAG,CAAC,SAAS,EAAE,CAAA;OAChB;MACH,YAAC;EAAD,CAAC,IAAA;EAED;MAME,kBAAY,QAAgB;UAC1B,IAAI,CAAC,GAAG,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAA;UAC9B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;UACxB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAA;UACzB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAA;UAClB,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,EAAS,CAAA;OAChC;MACD,uBAAI,GAAJ,UAAM,QAAgB;UACpB,IAAM,MAAM,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAA;UACrC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;UAClC,OAAO,MAAM,CAAA;OACd;MACD,uBAAI,GAAJ,UAAM,GAA6B,EAAE,UAAmB,EAAE,SAAkB;UAC1E,IAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAA;UAChC,IAAI,GAAG,IAAI,CAAC,EAAE;cACZ,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;cACxB,IAAI,UAAU,EAAE;;kBAEd,GAAG,CAAC,WAAW,GAAG,SAAS,CAAA;eAC5B;mBAAM;kBACL,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;eAC7B;cACD,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;cAC/B,GAAG,CAAC,SAAS,EAAE,CAAA;cACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,GAAC,CAAC,EAAE,CAAC,EAAE,EAAE;kBAC9B,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAA;kBAClE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAI,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAI,GAAG,CAAC,CAAA;eAC7E;cACD,IAAI,SAAS,EAAE;kBACb,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,GAAE,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAA;kBAC7E,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAI,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAI,GAAG,CAAC,CAAA;eACrE;cACD,GAAG,CAAC,MAAM,EAAE,CAAA;cACZ,IAAI,UAAU,EAAE;kBACd,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,KAAK;sBAC/B,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;mBAChB,CAAC,CAAA;eACH;WACF;OACF;MACH,eAAC;EAAD,CAAC,IAAA;EAqED;MAAA;OAIC;MAAD,gBAAC;EAAD,CAAC,IAAA;EAED;MAGE;UACE,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;UAChB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;OACpB;MAED,uBAAG,GAAH,UAAI,GAAW,EAAE,KAAQ;UACvB,IAAI,EAAE,GAAG,IAAI,SAAS,EAAK,CAAC;UAC5B,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC;UACb,EAAE,CAAC,KAAK,GAAG,KAAK,CAAC;UACjB,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;UACjC,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;cACjB,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;WAC/B;UACD,EAAE,CAAC,KAAK,GAAG,KAAK,CAAC;UACjB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;UAC7B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;OACtB;MAED,uBAAG,GAAH,UAAI,GAAW;UACb,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;cACjB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;cAClC,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;kBACd,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;eAChC;cACD,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;cACvB,IAAI,CAAC,UAAU,EAAE,CAAC;WACnB;OACF;MAED,8BAAU,GAAV;UAAA,iBAMC;UAJC,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAI;cACnB,IAAI,KAAK,GAAG,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;cACrC,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;WAC7B,CAAC,CAAC;OACJ;MAED,uBAAG,GAAH,UAAI,GAAW;UACb,OAAO,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC;OAC1B;MAED,uBAAG,GAAH,UAAI,GAAW;UACb,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;cACjB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;WAC9B;UACD,OAAO,IAAI,CAAC;OACb;MAED,yBAAK,GAAL;UACE,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;OAC7B;MAED,uBAAG,GAAH;UACE,OAAO,IAAI,CAAC,QAAQ,CAAC;OACtB;MAED,yBAAK,GAAL;UACE,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;OACzB;MAED,wBAAI,GAAJ;UACE,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;OAChD;MAED,8BAAU,GAAV,UAAW,KAAa;UACtB,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;OAC7B;;MAGD,2BAAO,GAAP,UAAQ,QAAyC;UAC/C,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE;cAC1B,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;WACtC;OACF;;MAGD,2BAAO,GAAP,UAAQ,GAAG;UACT,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;cACjB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;WAC9B;OACF;;MAGD,4BAAQ,GAAR,UAAS,KAAa,EAAE,KAAQ,EAAE,GAAW;UAC3C,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;UACtC,IAAI,KAAK,GAAG,IAAI,SAAS,EAAK,CAAC;UAC/B,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;UACpB,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC;UAChB,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;UACpB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;UACxB,IAAI,CAAC,UAAU,EAAE,CAAC;OACnB;MAED,wBAAI,GAAJ,UAAK,QAAkB;UACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAC,CAAI,EAAE,CAAI;cAC5B,OAAO,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;WACvB,CAAC,CAAC;OACJ;MACH,gBAAC;EAAD,CAAC;;EC9OD,IAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAA;EACjD,IAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;EAC7C,IAAM,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAA;EACtD,IAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAA;EACxD,IAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAA;EACjD,IAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;EAC7C,IAAM,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAA;EACjD,IAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAA;EACnD,IAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAA;EAC3D,IAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAA;EACxD,IAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAsB,CAAA;EAC9E,IAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAsB,CAAA;EAC9E,IAAM,WAAW,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;EAC/C,IAAM,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;EAC3C,IAAI,SAAS,GAAG,IAAI,SAAS,EAAY,CAAA;EACzC,IAAI,cAAc,GAAa,IAAI,CAAA;EACnC,IAAI,WAAW,GAAa,IAAI,CAAA;EAGhC,IAAI,QAAQ,GAAmD,MAAM,CAAA;EACrE,IAAI,QAAQ,GAAqB,MAAM,CAAA;EACvC,IAAI,UAAU,GAAyB,SAAS,CAAA;EAChD,SAAS,eAAe;MACtB,IAAM,GAAG,GAAG,QAAQ,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAA;MACzD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UACnC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAA;OACtC;EACH,CAAC;EACD,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MAClC,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,QAAQ,GAAG,QAAQ,CAAA;MACnB,eAAe,EAAE,CAAA;MACjB,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACrC,CAAC,CAAC,CAAA;EAEF,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MAChC,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,QAAQ,GAAG,MAAM,CAAA;MACjB,eAAe,EAAE,CAAA;MACjB,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACnC,CAAC,CAAC,CAAA;EAEF,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MACpC,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,QAAQ,GAAG,MAAM,CAAA;MACjB,QAAQ,GAAG,MAAM,CAAA;MACjB,UAAU,GAAG,QAAQ,CAAA;MACrB,eAAe,EAAE,CAAA;MACjB,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACvC,CAAC,CAAC,CAAA;EAEF,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MACrC,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,QAAQ,GAAG,MAAM,CAAA;MACjB,QAAQ,GAAG,OAAO,CAAA;MAClB,UAAU,GAAG,QAAQ,CAAA;MACrB,eAAe,EAAE,CAAA;MACjB,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACxC,CAAC,CAAC,CAAA;EAEF;;;;;;EAMA,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MACnC,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,SAAS,GAAG,IAAI,SAAS,EAAY,CAAA;MACrC,WAAW,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;MACjE,eAAe,EAAE,CAAA;MACjB,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACvC,CAAC,CAAC,CAAA;EAEF,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MAChC,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,IAAM,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,CAAA;MAC7B,IAAI,IAAI,EAAE;UACR,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;UAC5B,QAAQ,EAAE,CAAA;OACX;MACD,eAAe,EAAE,CAAA;MACjB,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACvC,CAAC,CAAC,CAAA;EAEF,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MAC/B,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,IAAI,cAAc,EAAE;UAClB,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAA;UACtC,cAAc,GAAG,IAAI,CAAA;UACrB,SAAS,EAAE,CAAA;UACX,QAAQ,EAAE,CAAA;UACV,QAAQ,GAAG,MAAM,CAAA;OAClB;EACH,CAAC,CAAC,CAAA;EAEF,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MACvC,IAAI,QAAQ,KAAK,MAAM,EAAE;UACvB,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAA;UACtD,cAAc,GAAG,IAAI,CAAA;UACrB,SAAS,EAAE,CAAA;UACX,QAAQ,EAAE,CAAA;UACV,QAAQ,GAAG,MAAM,CAAA;OAClB;MACD,eAAe,EAAE,CAAA;MACjB,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACvC,CAAC,CAAC,CAAA;EAEF,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC;MACrC,IAAI,QAAQ,KAAK,MAAM,EAAE;UACvB,IAAI,WAAW,EAAE;cACf,IAAM,SAAS,GAAG,IAAI,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAA;cACvD,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;cAC5C,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAA;cACjD,WAAW,GAAG,IAAI,CAAA;WACnB;UACD,cAAc,GAAG,IAAI,CAAA;UACrB,SAAS,EAAE,CAAA;UACX,QAAQ,EAAE,CAAA;UACV,QAAQ,GAAG,MAAM,CAAA;OAClB;MACD,eAAe,EAAE,CAAA;MACjB,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACvC,CAAC,CAAC,CAAA;EAEI,IAAA,uCAKgC,EAJpC,oBAAgB,EAChB,sBAAkB,EAClB,kBAAc,EACd,iBACoC,CAAA;EAC9B,IAAA,8BAAkB,EAAE,gCAAoB,CAAe;EAC/D,IAAM,MAAM,IAAI,WAAW,GAAG,SAAS,CAAC,CAAA;EACxC,IAAM,MAAM,IAAI,YAAY,GAAG,UAAU,CAAC,CAAA;EAC1C,IAAM,UAAU,GAAG,QAAQ,CAAA;EAC3B,IAAM,SAAS,GAAG,QAAQ,CAAA;EAE1B,SAAS,SAAS;MAChB,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC,CAAA;EAC9D,CAAC;EAMD,SAAS,QAAQ;MACf,SAAS,EAAE,CAAA;MACX,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,QAAQ,KAAK,MAAM,IAAI,QAAQ,KAAK,MAAM,CAAC,CAAA;EAChF,CAAC;EAED,SAAS,QAAQ;MACf,WAAW,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;MACjF,SAAS,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG;UACzB,IAAI,CAAC,cAAc,IAAI,GAAG,KAAK,cAAc,CAAC,QAAQ,EAAE;cACtD,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC,CAAA;WACnC;OACF,CAAC,CAAA;EACJ,CAAC;EAED,IAAI,SAAgB,CAAA;EACpB,IAAI,cAAsB,CAAA;EAC1B,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAU,CAAC;MAClD,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,IAAM,KAAK,GAAU,IAAI,KAAK,CAC5B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,UAAU,IAAI,MAAM,CAAC,EAC3C,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,SAAS,IAAI,MAAM,CAAC,CAC3C,CAAA;MACD,IAAI,QAAQ,KAAK,MAAM,EAAE;UACvB,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,CAAC;cACrC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;kBAC9D,cAAc,GAAG,KAAK,CAAA;eACvB;WACF,CAAC,CAAA;OACH;MACD,IAAI,QAAQ,KAAK,MAAM,EAAE;UACvB,IAAI,CAAC,cAAc,EAAE;cACnB,IAAM,QAAQ,GAAG,iBAAiB,CAAC,SAAS,CAAC,CAAA;cAC7C,cAAc,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAA;WACxC;UACD,IAAI,QAAQ,KAAK,OAAO,EAAE;cACxB,IAAM,GAAG,GAAG,cAAc,CAAC,MAAM,CAAC,MAAM,EAAE,CAAA;cAC1C,IAAI,GAAG,KAAK,CAAC,EAAE;kBACb,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;eACjC;mBAAM;kBACL,IAAM,EAAE,GAAG,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;kBACvC,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;sBAChE,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAA;sBACrC,UAAU,GAAG,SAAS,CAAA;sBACtB,QAAQ,GAAG,MAAM,CAAA;sBACjB,eAAe,EAAE,CAAA;mBAClB;eACF;cACD,IAAI,UAAU,KAAK,QAAQ,EAAE;kBAC3B,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;eACjC;WACF;UACD,IAAI,QAAQ,KAAK,MAAM,EAAE;cACvB,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;cAChC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;cAChC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;cAChC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;WACjC;OACF;MACD,IAAI,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,MAAM,EAAE;UAChD,SAAS,CAAC,OAAO,CAAC,UAAA,GAAG;cACnB,IAAI,WAAW,CAAC,KAAK,EAAE,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE;kBACjD,cAAc,GAAG,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;eACpC;WACF,CAAC,CAAA;UACF,IAAI,cAAc,EAAE;cAClB,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAA;cAC/D,IAAI,QAAQ,KAAK,MAAM,EAAE;kBACvB,cAAc,GAAG,WAAW,CAAA;kBAC5B,WAAW,GAAG,IAAI,CAAA;eACnB;cACD,SAAS,GAAG,KAAK,CAAA;cACjB,QAAQ,EAAE,CAAA;WACX;OACF;MACD,IAAI,cAAc,EAAE;UAClB,QAAQ,EAAE,CAAA;OACX;EACH,CAAC,CAAC,CAAA;EAEF,IAAM,kBAAkB,GAAG,UAAU,CAAa;MAChD,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,IAAI,cAAc,EAAE;UAClB,IAAM,GAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,UAAU,IAAI,MAAM,CAAC,CAAA;UACrD,IAAM,GAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,SAAS,IAAI,MAAM,CAAC,CAAA;UACpD,IAAI,QAAQ,KAAK,MAAM,EAAE;cACvB,IAAI,QAAQ,KAAK,MAAM,EAAE;kBACvB,IAAM,MAAM,GAAG,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;kBAC3C,IAAM,MAAM,GAAU,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,GAAC,CAAC,CAAA;kBAC5C,IAAM,MAAM,GAAU,IAAI,KAAK,CAAC,GAAC,EAAE,GAAC,CAAC,CAAA;kBACrC,IAAM,MAAM,GAAU,IAAI,KAAK,CAAC,GAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAA;kBAC5C,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAA;kBACpC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAA;kBACpC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAA;eACrC;cACD,IAAI,QAAQ,KAAK,OAAO,IAAI,UAAU,KAAK,QAAQ,EAAE;kBACnD,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE,IAAI,KAAK,CAAC,GAAC,EAAE,GAAC,CAAC,CAAC,CAAA;eAC/E;cACD,QAAQ,EAAE,CAAA;WACX;UACD,IAAI,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,MAAM,EAAE;cAChD,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,KAAK;kBACzC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,SAAS,CAAC,CAAC,GAAG,GAAC,CAAC,EAAE,KAAK,CAAC,CAAC,IAAI,SAAS,CAAC,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC,CAAA;eACtG,CAAC,CAAA;cACF,SAAS,GAAG,IAAI,KAAK,CAAC,GAAC,EAAE,GAAC,CAAC,CAAA;cAC3B,QAAQ,EAAE,CAAA;WACX;UACD,IAAI,QAAQ,KAAK,MAAM,EAAE;cACvB,IAAG,cAAc,KAAK,IAAI,EAAE;kBAC1B,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,KAAK,CAAC,GAAC,EAAE,GAAC,CAAC,CAAC,CAAA;kBAC1D,QAAQ,EAAE,CAAA;eACX;WACF;OACF;EACH,CAAC,CAAA;EAED,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC;EAC7D,UAAU,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAU,CAAC;MAChD,CAAC,CAAC,cAAc,EAAE,CAAA;MAClB,IAAI,cAAc,KAAK,IAAI,EAAE;UAC3B,cAAc,GAAG,IAAI,CAAA;OACtB;MACD,IAAI,QAAQ,KAAK,OAAO,IAAI,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,MAAM,EAAE;UACxE,QAAQ,GAAG,MAAM,CAAA;UACjB,eAAe,EAAE,CAAA;OAClB;EACH,CAAC,CAAC,CAAC;EAEH,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,UAAU,CAAC;EACrD,CAAC,CAAC;;;;"}