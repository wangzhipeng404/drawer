{"version":3,"file":"bundle.cjs.js","sources":["../src/list.ts","../src/utils.ts","../src/hashTable.ts","../src/main.ts"],"sourcesContent":["export class List<T> {\r\n  private items: Array<T>;\r\n\r\n  private checkIndex(index): boolean {\r\n    return !(index < 0 || isNaN(index) || index >= this.items.length);\r\n  }\r\n  constructor() {\r\n    this.items = new Array<T>();\r\n  }\r\n\r\n  length(): number {\r\n    return this.items.length;\r\n  }\r\n\r\n  add(value: T): void {\r\n    this.items.push(value);\r\n  }\r\n  addList(valueList: List<T>) {\r\n    for (var i = 0; i < valueList.length(); i++) {\r\n      var value = valueList.get(i);\r\n      this.items.push(value);\r\n    }\r\n  }\r\n  pop(): T {\r\n    return this.items.pop();\r\n  }\r\n\r\n  shift() {\r\n    this.items.shift();\r\n  }\r\n\r\n  remove(index: number): void {\r\n    if (this.checkIndex(index)) {\r\n      this.items.splice(index, 1);\r\n\r\n    }\r\n  }\r\n  /**\r\n   * 從指定索引處開始刪除指定個數的元素\r\n   * @param from \r\n   * @param count \r\n   */\r\n  removeMany(from: number, count: number) {\r\n\r\n    if (this.checkIndex(from)) {\r\n      this.items.splice(from, count);\r\n    }\r\n  }\r\n\r\n  clear(): void {\r\n    this.items = [];\r\n  }\r\n\r\n  contains(value: T): boolean {\r\n    for (var i in this.items) {\r\n      return value == this.items[i];\r\n    }\r\n    return false;\r\n  }\r\n\r\n  indexOf(value: T): number {\r\n    return this.items.indexOf(value);\r\n  }\r\n\r\n  insert(index: number, value: T) {\r\n    //this.checkIndex(index) && this.items.splice(index , 0, value);\r\n    this.items.splice(index, 0, value);\r\n  }\r\n\r\n  get(index: number): T {\r\n    return this.items[index];\r\n  }\r\n  set(index, value: T) {\r\n    this.items[index] = value;\r\n  }\r\n  all(): Array<T> {\r\n    return this.items;\r\n  }\r\n  foreach(callback: (i: number, item: T) => any) {\r\n    var len = this.items.length;\r\n    for (var i = 0; i < len; i++) {\r\n      if (callback(i, this.items[i]) === false) break;\r\n    }\r\n  }\r\n  reverseForeach(callback) {\r\n    var len = this.items.length;\r\n    for (var i = len - 1; i >= 0; i--) {\r\n      if (callback(i, this.items[i]) === false) break;\r\n    }\r\n  }\r\n  sort(callback: Function) {\r\n    this.items.sort((a: T, b: T) => { return callback(a, b); });\r\n  }\r\n}","import { HashTable, PenLine, Point, PenShape } from './hashTable'\r\nimport { List } from './list';\r\nfunction getRandomColor() {\r\n  var randColor = (Math.random() * 0xFFFFFF << 0).toString(16);\r\n  while (randColor.length < 6) {\r\n      randColor = \"0\" + randColor;\r\n  }\r\n  return randColor\r\n}\r\n\r\nexport function getUniqueColorKey(elements: HashTable<PenShape>) {\r\n  var key = ''\r\n  while (true) {\r\n      key = getRandomColor();\r\n      if (key && !(elements.has(key))) {\r\n          break;\r\n      }\r\n  }\r\n  return `#${key}`;\r\n}\r\n\r\nexport function hexToRgbA(hex: string): [number, number, number]{\r\n  var c;\r\n  if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){\r\n      c= hex.substring(1).split('');\r\n      if(c.length== 3){\r\n          c= [c.x, c.x, c.y, c.y, c[2], c[2]];\r\n      }\r\n      c= '0x'+c.join('');\r\n      return [(c>>16)&255, (c>>8)&255, c&255];\r\n  }\r\n  throw new Error('Bad Hex');\r\n}\r\n\r\nexport function abgleCacul(pointA: Point, pointB: Point, pointC: Point): number {\r\n  const lengthAB = Math.sqrt( Math.pow(pointA.x - pointB.x, 2) + \r\n  Math.pow(pointA.y - pointB.y, 2))\r\n  const lengthAC = Math.sqrt( Math.pow(pointA.x - pointC.x, 2) + \r\n    Math.pow(pointA.y - pointC.y, 2))\r\n  const lengthBC = Math.sqrt( Math.pow(pointB.x - pointC.x, 2) + \r\n    Math.pow(pointB.y - pointC.y, 2));\r\n  const cosA = (Math.pow(lengthAB, 2) + Math.pow(lengthAC, 2) - Math.pow(lengthBC, 2)) / \r\n    (2 * lengthAB * lengthAC);\r\n  const angleA = Math.round( Math.acos(cosA) * 180 / Math.PI );\r\n  return angleA\r\n}\r\n\r\nexport function isInPolygon(checkPoint: Point, polygonPoints: List<Point>): boolean {\r\n  var counter = 0;\r\n  var i;\r\n  var xinters;\r\n  var p1, p2;\r\n  var pointCount = polygonPoints.length();\r\n  p1 = polygonPoints.get(0);\r\n\r\n  for (i = 1; i <= pointCount; i++) {\r\n      p2 = polygonPoints.get(i % pointCount);\r\n      if (\r\n          checkPoint.x > Math.min(p1.x, p2.x) &&\r\n          checkPoint.x <= Math.max(p1.x, p2.x)\r\n      ) {\r\n          if (checkPoint.y <= Math.max(p1.y, p2.y)) {\r\n              if (p1.x != p2.x) {\r\n                  xinters =\r\n                      (checkPoint.x - p1.x) *\r\n                          (p2.y - p1.y) /\r\n                          (p2.x - p1.x) +\r\n                      p1.y;\r\n                  if (p1.y == p2.y || checkPoint.y <= xinters) {\r\n                      counter++;\r\n                  }\r\n              }\r\n          }\r\n      }\r\n      p1 = p2;\r\n  }\r\n  if (counter % 2 == 0) {\r\n      return false;\r\n  } else {\r\n      return true;\r\n  }\r\n}","import { List } from './list'\r\nimport { hexToRgbA, getUniqueColorKey } from './utils'\r\nexport class Point {\r\n  x: number;\r\n  y: number;\r\n  constructor(x: number, y: number) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n  draw (ctx: CanvasRenderingContext2D) {\r\n    ctx.strokeStyle = '#fff';\r\n    ctx.lineWidth = 1\r\n    ctx.beginPath()\r\n    ctx.arc(this.x + 0.5, this.y + 0.5, 2, 0, 360)\r\n    ctx.stroke()\r\n    ctx.closePath()\r\n  }\r\n}\r\n\r\nexport class PenShape {\r\n  colorKey: string;\r\n  lineColor: string;\r\n  lineWidth: number;\r\n  points: List<Point>;\r\n  rgb: [number, number, number];\r\n  constructor(colorKey: string) {\r\n    this.rgb = hexToRgbA(colorKey)\r\n    this.colorKey = colorKey\r\n    this.lineColor = colorKey\r\n    this.lineWidth = 1\r\n    this.points = new List<Point>()\r\n  }\r\n  copy (colorKey: string) {\r\n    const copyed = new PenShape(colorKey)\r\n    copyed.points.addList(this.points)\r\n    return copyed\r\n  }\r\n  draw (ctx: CanvasRenderingContext2D, isHintDraw: boolean, closePath: boolean) {\r\n    const len = this.points.length()\r\n    if (len >= 2) {\r\n      ctx.fillStyle = 'green';\r\n      if (isHintDraw) {\r\n        // ctx.strokeStyle = this.colorKey;\r\n        ctx.strokeStyle = '#f5222d'\r\n      } else {\r\n        ctx.strokeStyle = '#1890ff';\r\n      }\r\n      ctx.lineWidth = this.lineWidth;\r\n      ctx.beginPath()\r\n      for (let i = 0; i < len-1; i++) {\r\n        ctx.moveTo(this.points.get(i).x + 0.5, this.points.get(i).y + 0.5)\r\n        ctx.lineTo(this.points.get(i + 1).x  + 0.5, this.points.get(i + 1).y  + 0.5)\r\n      }\r\n      if (closePath) {\r\n        ctx.moveTo(this.points.get(len - 1).x + 0.5, this.points.get(len -1).y + 0.5)\r\n        ctx.lineTo(this.points.get(0).x  + 0.5, this.points.get(0).y  + 0.5)\r\n      }\r\n      ctx.stroke()\r\n      if (isHintDraw) {\r\n        this.points.foreach((index, point) => {\r\n          point.draw(ctx)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class PenLine {\r\n  colorKey: string;\r\n  lineColor: string;\r\n  lineWidth: number;\r\n  points: List<Point>;\r\n  constructor(colorKey: string) {\r\n    this.colorKey = colorKey\r\n    this.lineColor = 'rgba(0, 0, 0, 1)'\r\n    this.lineWidth = 1\r\n    this.points = new List<Point>()\r\n  }\r\n  draw(ctx: CanvasRenderingContext2D, eraserRadius: number, isDrawHit: boolean) {\r\n    var count = this.points.length();\r\n    var p: Point = this.points.get(0);\r\n    if (isDrawHit) {\r\n      ctx.strokeStyle = this.colorKey;\r\n    }\r\n    else {\r\n      ctx.strokeStyle = this.lineColor;\r\n    }\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineJoin = 'round';//转折的时候不出现尖角\r\n    if (ctx.canvas.id == \"hitCanvas\")\r\n      ctx.lineWidth = this.lineWidth + eraserRadius;//扩大hit上线条的范围，橡皮半径\r\n    else\r\n    ctx.lineWidth = this.lineWidth;\r\n    ctx.beginPath();\r\n    if (count >= 2) {\r\n      ctx.moveTo(p.x, p.y);\r\n      for (var i = 1; i < count - 2; i++) {\r\n        // p = this.points.get(i);\r\n        // ctx.lineTo(p.x, p.y);\r\n        if (this.points.get(i).x == this.points.get(i + 1).x && this.points.get(i).y == this.points.get(i + 1).y)\r\n          continue;\r\n        var c = (this.points.get(i).x + this.points.get(i + 1).x) / 2;\r\n        var d = (this.points.get(i).y + this.points.get(i + 1).y) / 2;\r\n        ctx.quadraticCurveTo(this.points.get(i).x, this.points.get(i).y, c, d); //二次贝塞曲线函数   \r\n      }\r\n      // For the last 2 points\r\n      if (count >= 3) {\r\n        ctx.quadraticCurveTo(\r\n          this.points.get(i).x,\r\n          this.points.get(i).y,\r\n          this.points.get(i + 1).x,\r\n          this.points.get(i + 1).y\r\n        );\r\n      } else if (count >= 2) {\r\n        ctx.lineTo(this.points.get(1).x, this.points.get(1).y);\r\n      }\r\n      ctx.stroke();\r\n    } else {\r\n      if (isDrawHit) {\r\n        ctx.fillStyle = this.colorKey;\r\n      }\r\n      else {\r\n        ctx.fillStyle = this.lineColor;\r\n      }\r\n      if (ctx.canvas.id == \"hitCanvas\")\r\n        var radius = this.lineWidth + eraserRadius;//扩大hit上线条的范围，橡皮半径\r\n      else\r\n        var radius = this.lineWidth;\r\n      ctx.arc(this.points.get(0).x, this.points.get(0).y, radius, 0, 2 * Math.PI);\r\n      ctx.fill();\r\n    }\r\n  }\r\n}\r\n\r\nclass HashValue<T>{\r\n  key: string;\r\n  value: T;\r\n  index: number;\r\n}\r\n\r\nexport class HashTable<T> {\r\n  private items: { [key: string]: HashValue<T> };\r\n  private itemList: Array<T>;\r\n  constructor() {\r\n    this.items = {};\r\n    this.itemList = [];\r\n  }\r\n\r\n  set(key: string, value: T): void {\r\n    var vl = new HashValue<T>();\r\n    vl.key = key;\r\n    vl.value = value;\r\n    var index = this.itemList.length;\r\n    if (this.has(key)) {\r\n      index = this.items[key].index;\r\n    }\r\n    vl.index = index;\r\n    this.itemList[index] = value;\r\n    this.items[key] = vl;\r\n  }\r\n\r\n  del(key: string): void {\r\n    if (this.has(key)) {\r\n      var index = this.items[key].index;\r\n      if (index > -1) {\r\n        this.itemList.splice(index, 1);\r\n      }\r\n      delete this.items[key];\r\n      this.resetIndex();\r\n    }\r\n  }\r\n\r\n  resetIndex(): void {\r\n\r\n    this.foreach((k, v: T) => {\r\n      var index = this.itemList.indexOf(v);\r\n      this.items[k].index = index;\r\n    });\r\n  }\r\n\r\n  has(key: string): boolean {\r\n    return key in this.items;\r\n  }\r\n\r\n  get(key: string): T {\r\n    if (this.has(key)) {\r\n      return this.items[key].value;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  count(): number {\r\n    return this.itemList.length;\r\n  }\r\n\r\n  all(): Array<T> {\r\n    return this.itemList;\r\n  }\r\n\r\n  first() {\r\n    return this.itemList[0];\r\n  }\r\n\r\n  last() {\r\n    return this.itemList[this.itemList.length - 1];\r\n  }\r\n\r\n  getByIndex(index: number): T {\r\n    return this.itemList[index];\r\n  }\r\n\r\n  //遍历 扩展\r\n  foreach(callback: (key: string, value: T) => void) {\r\n    for (var key in this.items) {\r\n      callback(key, this.items[key].value);\r\n    }\r\n  }\r\n\r\n  //获取index\r\n  indexOf(key) {\r\n    if (this.has(key)) {\r\n      return this.items[key].index;\r\n    }\r\n  }\r\n\r\n  //插入\r\n  insertAt(index: number, value: T, key: string) {\r\n    this.itemList.splice(index, 0, value);\r\n    var hashV = new HashValue<T>();\r\n    hashV.index = index;\r\n    hashV.key = key;\r\n    hashV.value = value;\r\n    this.items[key] = hashV;\r\n    this.resetIndex();\r\n  }\r\n\r\n  sort(callback: Function) {\r\n    this.itemList.sort((a: T, b: T) => {\r\n      return callback(a, b);\r\n    });\r\n  }\r\n}","import { HashTable, PenShape, Point, PenLine } from './hashTable'\r\nimport { List } from './list'\r\nimport { getUniqueColorKey, isInPolygon } from './utils'\r\nconst $select = document.getElementById('select')\r\nconst $copy = document.getElementById('copy')\r\nconst $drawRect = document.getElementById('draw-rect')\r\nconst $drawShape = document.getElementById('draw-shape')\r\nconst $eraser = document.getElementById('eraser')\r\nconst $undo = document.getElementById('undo')\r\nconst $del = document.getElementById('delte-btn')\r\nconst $cleanup = document.getElementById('cleanup')\r\nconst $connfirmBtn = document.getElementById('confirm-btn')\r\nconst $cancelBtn = document.getElementById('cancel-btn')\r\nconst hintCanvas = document.getElementById('hint-canvas') as HTMLCanvasElement\r\nconst mainCanvas = document.getElementById('main-canvas') as HTMLCanvasElement\r\nconst mainContext = mainCanvas.getContext('2d')\r\nconst context = hintCanvas.getContext('2d')\r\nlet hashTable = new HashTable<PenShape>()\r\nlet currentPenline: PenShape = null\r\nlet copyPenLine: PenShape = null\r\nlet eraserRadius = 10\r\nlet isErasePoint = true\r\nlet editMode: 'draw' | 'eraser' | 'select' | 'edit' | 'copy' = 'draw'\r\nlet drawMode: 'rect' | 'shape' = 'rect'\r\nlet shapeState: 'enable' | 'disable' = 'disable'\r\nfunction removeBtnActive () {\r\n  const els = document.getElementsByClassName('btn-active')\r\n  for (let i = 0; i < els.length; i++) {\r\n    els[i].classList.remove('btn-active')\r\n  }\r\n}\r\n$select.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'select'\r\n  removeBtnActive()\r\n  $select.classList.add('btn-active')\r\n})\r\n\r\n$copy.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'copy'\r\n  removeBtnActive()\r\n  $copy.classList.add('btn-active')\r\n})\r\n\r\n$drawRect.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'draw'\r\n  drawMode = 'rect'\r\n  shapeState = 'enable'\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$drawShape.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  editMode = 'draw'\r\n  drawMode = 'shape'\r\n  shapeState = 'enable'\r\n  removeBtnActive()\r\n  $drawShape.classList.add('btn-active')\r\n})\r\n\r\n/* $eraser.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  console.log('eraser')\r\n  editMode = 'eraser'\r\n})\r\n */\r\n$cleanup.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  hashTable = new HashTable<PenShape>()\r\n  mainContext.clearRect(0, 0, mainCanvas.width, mainCanvas.height);\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$undo.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  const last = hashTable.last()\r\n  if (last) {\r\n    hashTable.del(last.colorKey)\r\n    mainDraw()\r\n  }\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$del.addEventListener('click', (e) => {\r\n  e.preventDefault()\r\n  if (currentPenline) {\r\n    hashTable.del(currentPenline.colorKey)\r\n    currentPenline = null\r\n    hintClear()\r\n    mainDraw()\r\n    editMode = 'draw'\r\n  }\r\n})\r\n\r\n$connfirmBtn.addEventListener('click', (e) => {\r\n  if (editMode === 'edit') {\r\n    hashTable.set(currentPenline.colorKey, currentPenline)\r\n    currentPenline = null\r\n    hintClear()\r\n    mainDraw()\r\n    editMode = 'draw'\r\n  }\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\n$cancelBtn.addEventListener('click', (e) => {\r\n  if (editMode === 'edit') {\r\n    if (copyPenLine) {\r\n      const restShape = new PenShape(currentPenline.colorKey)\r\n      restShape.points.addList(copyPenLine.points)\r\n      hashTable.set(currentPenline.colorKey, restShape)\r\n      copyPenLine = null\r\n    }\r\n    currentPenline = null\r\n    hintClear()\r\n    mainDraw()\r\n    editMode = 'draw'\r\n  }\r\n  removeBtnActive()\r\n  $drawRect.classList.add('btn-active')\r\n})\r\n\r\nconst {\r\n  width: rectWidth,\r\n  height: rectHeight,\r\n  left: rectLeft,\r\n  top: reactTop\r\n} = hintCanvas.getBoundingClientRect()\r\nconst { width: canvasWidth, height: canvasHeight } = hintCanvas\r\nconst scaleX = (canvasWidth / rectWidth)\r\nconst scaleY = (canvasHeight / rectHeight)\r\nconst offsetLeft = rectLeft\r\nconst offsetTop = reactTop\r\n\r\nfunction hintClear () {\r\n  context.clearRect(0, 0, hintCanvas.width, hintCanvas.height)\r\n}\r\n\r\nfunction mainClear () {\r\n  mainContext.clearRect(0, 0, mainCanvas.width, mainCanvas.height)\r\n}\r\n\r\nfunction hintDraw () {\r\n  hintClear()\r\n  currentPenline.draw(context, true, editMode !== 'draw' || drawMode === 'rect')\r\n}\r\n\r\nfunction mainDraw() {\r\n  mainContext.clearRect(0, 0, mainContext.canvas.width, mainContext.canvas.height); // 清除画布内容\r\n  hashTable.foreach((key, val) => {\r\n    if (!currentPenline || key !== currentPenline.colorKey) {\r\n      val.draw(mainContext, false, true)\r\n    }\r\n  })\r\n}\r\n\r\nlet keepPoint: Point\r\nlet keepPointIndex: number\r\nhintCanvas.addEventListener('mousedown', function (e) {\r\n  e.preventDefault()\r\n  const point: Point = new Point(\r\n    Math.floor((e.pageX - offsetLeft) * scaleX),\r\n    Math.floor((e.pageY - offsetTop) * scaleY),\r\n  )\r\n  if (editMode === 'edit') {\r\n    currentPenline.points.foreach((index, p) => {\r\n      if (Math.abs(p.x - point.x) < 3 && Math.abs(p.y - point.y) < 3) {\r\n        keepPointIndex = index\r\n      }\r\n    })\r\n  }\r\n  if (editMode === 'draw') {\r\n    if (!currentPenline) {\r\n      const colorKey = getUniqueColorKey(hashTable)\r\n      currentPenline = new PenShape(colorKey)\r\n    }\r\n    if (drawMode === 'rect') {\r\n      currentPenline.points.add(point)\r\n      currentPenline.points.add(point)\r\n      currentPenline.points.add(point)\r\n      currentPenline.points.add(point)\r\n    }\r\n    if (drawMode === 'shape') {\r\n      const len = currentPenline.points.length()\r\n      if (len === 0) {\r\n        currentPenline.points.add(point)\r\n      } else {\r\n        const p0 = currentPenline.points.get(0)\r\n        if (Math.abs(p0.x - point.x) < 3 && Math.abs(p0.y - point.y) < 3) {\r\n          currentPenline.points.remove(len - 1)\r\n          // shapeState = 'disable'\r\n          hashTable.set(currentPenline.colorKey, currentPenline)\r\n          currentPenline = null\r\n          hintClear()\r\n          mainDraw()\r\n        }\r\n      }\r\n      if (currentPenline && shapeState === 'enable') {\r\n        currentPenline.points.add(point)\r\n      }\r\n    }\r\n  }\r\n  if (editMode === 'select' || editMode === 'copy') {\r\n    hashTable.foreach(key => {\r\n      if (isInPolygon(point, hashTable.get(key).points)) {\r\n        currentPenline = hashTable.get(key)\r\n      }\r\n    })\r\n    if (currentPenline) {\r\n      copyPenLine = currentPenline.copy(getUniqueColorKey(hashTable))\r\n      if (editMode === 'copy') {\r\n        currentPenline = copyPenLine\r\n        copyPenLine = null\r\n      }\r\n      keepPoint = point\r\n      mainDraw()\r\n    }\r\n  }\r\n  if (currentPenline) {\r\n    hintDraw()\r\n  }\r\n})\r\n\r\nconst onMouseMoveHandler = function (e: MouseEvent) {\r\n  e.preventDefault()\r\n  if (currentPenline) {\r\n    const x = Math.floor((e.pageX - offsetLeft) * scaleX)\r\n    const y = Math.floor((e.pageY - offsetTop) * scaleY)\r\n    if (editMode === 'draw') {\r\n      if (drawMode === 'rect') {\r\n        const point0 = currentPenline.points.get(0)\r\n        const point1: Point = new Point(point0.x, y)\r\n        const point2: Point = new Point(x, y)\r\n        const point3: Point = new Point(x, point0.y)\r\n        currentPenline.points.set(1, point1)\r\n        currentPenline.points.set(2, point2)\r\n        currentPenline.points.set(3, point3)\r\n      }\r\n      if (drawMode === 'shape' && shapeState === 'enable') {\r\n        currentPenline.points.set(currentPenline.points.length() - 1, new Point(x, y))\r\n      }\r\n      hintDraw()\r\n    }\r\n    if (editMode === 'select' || editMode === 'copy') {\r\n      currentPenline.points.foreach((index, point) => {\r\n        currentPenline.points.set(index, new Point(point.x - (keepPoint.x - x), point.y - (keepPoint.y - y)))\r\n      })\r\n      keepPoint = new Point(x, y)\r\n      hintDraw()\r\n    }\r\n    if (editMode === 'edit') {\r\n      if(keepPointIndex !== null) {\r\n        currentPenline.points.set(keepPointIndex, new Point(x, y))\r\n        hintDraw()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nhintCanvas.addEventListener('mousemove', onMouseMoveHandler);\r\nhintCanvas.addEventListener('mouseup', function (e) {\r\n  e.preventDefault()\r\n  if (keepPointIndex !== null) {\r\n    keepPointIndex = null\r\n  }\r\n  if (editMode === 'select') {\r\n    editMode = 'edit'\r\n    removeBtnActive()\r\n  }\r\n  console.log(editMode, drawMode)\r\n  if ((editMode === 'draw' && drawMode === 'rect') || editMode === 'copy') {\r\n    console.log('up')\r\n    hashTable.set(currentPenline.colorKey, currentPenline)\r\n    currentPenline = null\r\n    hintClear()\r\n    mainDraw()\r\n  }\r\n});\r\n\r\nhintCanvas.addEventListener('mouseleava', function (e) {\r\n});"],"names":[],"mappings":"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"}